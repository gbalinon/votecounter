(function(){var t={5904:function(t,e,n){"use strict";var a=n(6369),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("VoteChain")],1)},s=[],o=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"w3-sidebar w3-bar-block w3-black w3-card",staticStyle:{width:"130px"}},[e("h5",{staticClass:"w3-bar-item"},[t._v("VoteChain")]),e("button",{staticClass:"w3-bar-item w3-button tablink",attrs:{id:"btnHome"},on:{click:function(e){return t.openLink("btnHome","home")}}},[t._v("Home")]),e("button",{staticClass:"w3-bar-item w3-button tablink",attrs:{id:"btnVote"},on:{click:function(e){return t.openLink("btnVote","vote")}}},[t._v("Vote")]),e("button",{staticClass:"w3-bar-item w3-button tablink",attrs:{id:"btnResults"},on:{click:function(e){return t.openLink("btnResults","results")}}},[t._v("Results")]),e("button",{staticClass:"w3-bar-item w3-button tablink",attrs:{id:"btnAccount"},on:{click:function(e){return t.openLink("btnAccount","account")}}},[t._v("Account")])]),e("div",{staticClass:"w3-container",attrs:{id:"contents"}},[t._m(0),t.errorMessage.length>0?e("div",{staticClass:"w3-panel w3-pale-red w3-center w3-card-4 w3-padding"},[t._v(" "+t._s(t.errorMessage)+" ")]):t._e(),e("div",{attrs:{id:"tabs"}},[e("div",{staticClass:"w3-container tab w3-animate-left w3-center",staticStyle:{display:"block"},attrs:{id:"home"}},[e("h3",[t._v("Welcome "),e("code",{staticClass:"w3-text-blue"},[t._v(t._s(t.accounts[0]))])]),t.accounts.length>0?e("div",{staticClass:"w3-margin-top"},[e("div",{staticClass:"w3-center"},[t.hasVoted?e("div",{staticClass:"w3-panel w3-pale-green w3-padding-large"},[t._v("Thank you, your choice has been recorded and counted.")]):e("div",[t.votingEnabled?e("div",{staticClass:"w3-center w3-panel w3-padding-large w3-pale-blue"},[e("h4",[t._v("Voting has been opened and you are eligible to vote.")]),e("div",{staticClass:"w3-padding"},[e("button",{staticClass:"w3-button w3-blue w3-round",on:{click:function(e){return t.openLink("btnVote","vote")}}},[t._v("Click here to Vote")])])]):e("div",{staticClass:"w3-panel w3-padding w3-pale-yellow"},[e("h4",[t._v("You are eligible to vote but voting is NOT yet open.")]),t.isChairperson?e("div",{staticClass:"w3-panel"},[e("button",{staticClass:"w3-button w3-green w3-round",on:{click:function(e){return t.openVoting()}}},[t._v("Open Voting")])]):e("div",{staticClass:"w3-padding"},[t._v("Please contact the chairperson and request to open the voting.")])])])])]):e("div",{staticClass:"w3-center w3-panel w3-padding-large w3-pale-blue"},[t._m(1),e("div",{staticClass:"w3-padding"},[e("button",{staticClass:"w3-button w3-green w3-round",on:{click:function(e){return t.connectToMetamask()}}},[t._v("Connect your Metamask Account")])])])]),e("div",{staticClass:"w3-container tab w3-animate-left w3-center",staticStyle:{display:"none"},attrs:{id:"vote"}},[t.accounts.length>0?e("div",{staticClass:"w3-panel w3-center"},[t.hasVoted?e("div",{staticClass:"w3-panel w3-pale-green w3-padding-large"},[t._v("Thank you, your choice has been recorded and counted.")]):e("h2",[t._v("Choose one:")])]):e("div",{staticClass:"w3-padding"},[e("button",{staticClass:"w3-button w3-green w3-round",on:{click:function(e){return t.connectToMetamask()}}},[t._v("Connect your Metamask Account")])]),e("div",{staticClass:"w3-row-padding w3-center w3-margin-top"},t._l(t.candidates,(function(n,a){return e("div",{key:a,staticClass:"w3-third"},[e("div",{staticClass:"w3-card w3-container w3-margin-bottom",staticStyle:{"min-height":"290px"}},[e("h3",[t._v(t._s(n.name))]),e("img",{attrs:{src:n.imageUrl,height:"120"}}),e("div",{staticClass:"w3-panel"},[!t.hasVoted&&t.votingEnabled?e("button",{staticClass:"w3-button w3-block w3-green",on:{click:function(e){return t.confirmVote(a)}}},[t._v("Select and submit")]):t._e()])])])})),0)]),e("div",{staticClass:"w3-container tab w3-animate-left w3-center",staticStyle:{display:"none"},attrs:{id:"results"}},[t.accounts.length>0?e("h2",{staticClass:"w3-panel w3-center"},[t._v("Results")]):e("div",{staticClass:"w3-padding"},[e("button",{staticClass:"w3-button w3-green w3-round",on:{click:function(e){return t.connectToMetamask()}}},[t._v("Connect your Metamask Account")])]),e("div",{staticClass:"w3-row-padding w3-center w3-margin-top"},t._l(t.candidates,(function(n,a){return e("div",{key:a,staticClass:"w3-third"},[e("div",{staticClass:"w3-card w3-container w3-margin-bottom",staticStyle:{"min-height":"280px"}},[e("h3",[t._v(t._s(n.name)),n.isWinner?e("span",{staticClass:"w3-xlarge"},[e("sup",[t._v("ðŸ‘‘")])]):t._e()]),e("img",{attrs:{src:n.imageUrl,height:"120"}}),e("div",{staticClass:"w3-panel"},[t._v(" Votes: "),e("span",{staticClass:"w3-badge w3-green w3-large"},[t._v(t._s(n.voteCount))])])])])})),0)]),e("div",{staticClass:"w3-container tab w3-animate-left w3-center",staticStyle:{display:"none"},attrs:{id:"account"}},[e("div",{staticClass:"w3-panel w3-padding w3-margin-top"},[t.isChairperson?e("div",[e("div",{staticClass:"w3-card-4 w3-padding-large w3-margin"},[t._v("Leading Candidate: "+t._s(t.winner))]),e("div",{staticClass:"w3-card-4 w3-padding-large w3-margin"},[t._v("Number of Candidates: "+t._s(t.candidatesLength))]),e("div",{staticClass:"w3-card-4 w3-padding-large w3-margin"},[t._v("Voting Opened: "+t._s(t.votingEnabled))]),e("div",{staticClass:"w3-card-4 w3-padding-large w3-margin"},[t._v("Chairperson Address: "+t._s(t.chairpersonAddress))]),t.votingEnabled?e("div",{staticClass:"w3-panel"},[e("button",{staticClass:"w3-button w3-black w3-round w3-block",on:{click:function(e){return t.closeVoting()}}},[t._v("Close Voting")])]):e("div",{staticClass:"w3-panel"},[e("button",{staticClass:"w3-button w3-blue w3-round w3-block",on:{click:function(e){return t.openVoting()}}},[t._v("Open Voting")])])]):t._e(),e("div",{staticClass:"w3-panel"},[t.accounts.length>0?e("button",{staticClass:"w3-button w3-red w3-round w3-block",on:{click:function(e){return t.disconnect()}}},[t._v("Disconnect Metamask Account")]):e("button",{staticClass:"w3-button w3-green w3-round w3-block",on:{click:function(e){return t.connectToMetamask()}}},[t._v("Connect your Metamask Account")])])])])]),t._m(2)])])},r=[function(){var t=this,e=t._self._c;return e("header",{staticClass:"w3-container w3-padding",attrs:{id:"myHeader"}},[e("div",{staticClass:"w3-center"},[e("h1",{staticClass:"w3-xxxlarge w3-animate-left"},[t._v("What is your deepest desire?")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"w3-padding"},[e("p",[t._v("This dApp is deployed on the "),e("a",{attrs:{href:"https://goerli.etherscan.io/tx/0x6fcbfd0e8012340def06ad3ab6112ff000518be329658e05ce5930705529e030",target:"_blank"}},[t._v("GÃ¶rli Ethereum Testnet")]),t._v(".")]),e("p",[t._v("In order to vote and/or view the results, you need to have a metamask wallet and an account address connected to the GÃ¶rli Testnet.")]),e("p",[t._v("Voting requires gas payment, hence, your account must also have available GoerliETH.")]),e("p",[t._v("You can get test GoerliETH in the "),e("a",{attrs:{href:"https://goerlifaucet.com",target:"_blank"}},[t._v("Goerli Faucet")]),t._v(" or earn GoerliETH by mining "),e("a",{attrs:{href:"https://goerli-faucet.pk910.de/",target:"_blank"}},[t._v("here")]),t._v(".")]),e("p",[t._v("Please don't forget to disconnect after you have voted.")])])},function(){var t=this,e=t._self._c;return e("footer",{staticClass:"w3-container w3-padding-16 w3-center"},[e("p",[t._v("Powered by "),e("a",{attrs:{href:"#"}},[t._v("VoteChain")]),t._v(" - a decentralized voting application built on blockchain.")])])}],c=n(6796),l=n(2956),d=n(7647),u=JSON.parse('[{"inputs":[{"internalType":"bool","name":"_votingEnabled","type":"bool"}],"name":"setVotingState","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string[]","name":"_candidateNames","type":"string[]"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"uint256","name":"_candidate","type":"uint256"}],"name":"vote","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"candidates","outputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"uint256","name":"voteCount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"chairperson","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getCandidatesLength","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getWinner","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"voters","outputs":[{"internalType":"bool","name":"voted","type":"bool"},{"internalType":"uint256","name":"vote","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"votingEnabled","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"}]'),p={data(){return{provider:null,contract:null,candidatesLength:0,candidates:[],errorMessage:"",accounts:[],balance:0,message:"",votingEnabled:!1,hasVoted:!1,chairperson:null,isChairperson:null,senderAddress:null,chairpersonAddress:null,winner:null}},methods:{createContractInstance(){this.contract=new c.CH("0x089EF449999d6228c22E1ae45eB2D633082cd646",u),this.contract=this.contract.connect(this.provider),this.getVotingStatus(),this.getVoterHasVoted(),this.getChairperson(),this.getWinner(),this.getCandidates()},async connectToMetamask(){this.provider=new l.Q(window.ethereum),this.accounts=await this.provider.send("eth_requestAccounts",[]),this.getBalance(),this.createContractInstance()},async getCandidates(){this.candidatesLength=await this.contract.getCandidatesLength(),this.candidates=[];for(var t=0;t<this.candidatesLength;t++){var e=await this.contract.candidates(t),n=!1;n=this.winner==e.name;var a={name:e.name,voteCount:e.voteCount,imageUrl:"https://avatars.dicebear.com/api/adventurer-neutral/"+e.name+".svg",isWinner:n};this.candidates.push(a)}},async getVotingStatus(){this.votingEnabled=await this.contract.votingEnabled()},async getChairperson(){this.chairperson=await this.contract.chairperson();var t="";t=this.chairperson,this.chairpersonAddress=t.toUpperCase();var e=this.accounts[0];this.senderAddress=e.toUpperCase(),this.isChairperson=this.senderAddress==this.chairpersonAddress},async getVoterHasVoted(){var t=await this.contract.voters(this.accounts[0]);this.hasVoted=t.voted},async getWinner(){this.winner=await this.contract.getWinner()},disconnect(){this.accounts=[],this.balance=0,this.provider=null,this.contract=null,this.candidates=[],this.errorMessage="",this.hasVoted=!1,this.votingEnabled=!1,this.chairperson=null,this.candidatesLength=0,this.isChairperson=null},async addVote(t){var e=this.provider.getSigner(),n=this.contract.connect(e);try{var a=await n.vote(t);await a.wait(),await this.getVoterHasVoted(),await this.getWinner(),this.getCandidates(),this.errorMessage=""}catch(i){this.errorMessage=i.data.message}},async openVoting(){var t=this.provider.getSigner(),e=this.contract.connect(t);try{var n=await e.setVotingState(!0);await n.wait(),await this.getVotingStatus(),this.errorMessage=""}catch(a){this.errorMessage=a.data.message}},async closeVoting(){var t=this.provider.getSigner(),e=this.contract.connect(t);try{var n=await e.setVotingState(!1);await n.wait(),await this.getVotingStatus(),this.errorMessage=""}catch(a){this.errorMessage=a.data.message}},async getBalance(){var t=await this.provider.getBalance(this.accounts[0]);this.balance=d.dF(t)},openLink(t,e){var n,a,i;for(a=document.getElementsByClassName("tab"),n=0;n<a.length;n++)a[n].style.display="none";for(i=document.getElementsByClassName("tablink"),n=0;n<a.length;n++)i[n].className=i[n].className.replace(" w3-red","");document.getElementById(e).style.display="block",document.getElementById(t).className+=" w3-red"},confirmVote(t){confirm("Is that your final answer?")&&this.addVote(t)}}},h=p,w=n(1001),v=(0,w.Z)(h,o,r,!1,null,"842b4c0e",null),g=v.exports,b={name:"App",components:{VoteChain:g}},m=b,y=(0,w.Z)(m,i,s,!1,null,null,null),f=y.exports;a.ZP.config.productionTip=!1,new a.ZP({render:t=>t(f)}).$mount("#app")},6601:function(){}},e={};function n(a){var i=e[a];if(void 0!==i)return i.exports;var s=e[a]={id:a,loaded:!1,exports:{}};return t[a].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.m=t,function(){n.amdO={}}(),function(){var t=[];n.O=function(e,a,i,s){if(!a){var o=1/0;for(d=0;d<t.length;d++){a=t[d][0],i=t[d][1],s=t[d][2];for(var r=!0,c=0;c<a.length;c++)(!1&s||o>=s)&&Object.keys(n.O).every((function(t){return n.O[t](a[c])}))?a.splice(c--,1):(r=!1,s<o&&(o=s));if(r){t.splice(d--,1);var l=i();void 0!==l&&(e=l)}}return e}s=s||0;for(var d=t.length;d>0&&t[d-1][2]>s;d--)t[d]=t[d-1];t[d]=[a,i,s]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,a){var i,s,o=a[0],r=a[1],c=a[2],l=0;if(o.some((function(e){return 0!==t[e]}))){for(i in r)n.o(r,i)&&(n.m[i]=r[i]);if(c)var d=c(n)}for(e&&e(a);l<o.length;l++)s=o[l],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return n.O(d)},a=self["webpackChunkVoteChain"]=self["webpackChunkVoteChain"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(5904)}));a=n.O(a)})();
//# sourceMappingURL=app.425a75ec.js.map